<!DOCTYPE html>
<html>
	<head>
		{{page "head"}}
		<script>
			$(document).ready( function () { {{range script "init-script"}} 
	{{.}} {{end}} 
{{range script "init-home-script"}} 
	{{.}} {{end}}
			} ); 
{{range script "home-script"}} 
	{{.}} {{end}}
		</script>
		{{ajax "var:newRoomName" "var:newRoomPass" "newRoomSetup" "url:home" "trigger:newRoom" "handler:newRoom" "target:roomList" "data:'newRoomName':newRoomName,'newRoomPass':newRoomPass" "newRoomSuccess"}}
	</head>
	<body>
		<div style="position: fixed; top: 5%; height: 30%; width: 100%; z-index: 2;">
			<div>
				{{page "banner"}}
				<div class="panel">
					<div class="row panel-body" style="max-height: 30%; overflow-y: scroll;"> 
						<div class="span4">
							{{with $test := service "account" "isLoggedIn"}}
								{{if eq "True" $test}}
									Hello {{service "account" "session" "name"}}</br>
								{{end}}
							{{end}}
							{{target "roomList" "<ul class='ptListItem'></ul>"}}
							<!--<input id="newRoom-name" type="text" class="ptButton" size="24"/></br>
							<input id="newRoom-pass" type="password" class="ptButton" size="24"/></br>
							<input id="newRoom-trigger" class="ptButton" type="button" value="newRoom" />-->
							</br></br>
						</div>
						<div class="span8">
							Local:
						</div>
					</div>
					<div class="row block"> 
					</div>
				</div>
			</div>
		</div>
		<div id="wallpaper">
			<svg id="mySVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%">
				<script>
					var popSound = new Audio('/audio/bubblepop.mp3');
					function pop(cir) {
						cir.parentNode.removeChild(cir);
						popSound.play();
					}
				</script>
			</svg>
		</div>
		<div id="nav-menu">
			<svg id="menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%">
				{{range htmls "circleMenuItem" "MODAL>>logOutModal,myProfileModal,infoModal,adminModal,loungeModal" "TX>>50,130,210,290,370,450" "FILL>>93e,3e9,9e3,e93,39e,e39"	"LABEL>>Bye-Bye,Profile,Info,Admin,Lounge" "CX>>90,170,250,330,410,490"}}
					{{.}}
				{{end}}
			</svg>
		</div>
		<div id="images">
			<svg width="100%" height="100%"></svg>
		</div>
		<!--<div id="regionAreas">
			<svg id="regionAreasSVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%">
				<g>
					<circle cx="10" cy="90%" r="400" fill="#54c"/>
					<circle cx="10" cy="90%" r="300" fill="#a48"/>
					<circle cx="10" cy="90%" r="200" fill="#5ca"/>
					<a xlink:href="#postModal" class="ptButton">
						<text x="50" y="95%" font-family="Verdana" font-size="26" fill="#000">Post</text>
					</a>
					<circle cx="10" cy="95%" r="15" fill="#ff0"/>
				</g>
			</svg>
		</div>-->
		<div id="welcomeModal" class="modalDialog">
			<div style="text-align: center; width: 600px;">
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				<h2>Who will be joining us today?</h2>
				<div class="container">
					<form id="who" action="/home" method="post">
						{{ with session "item" "family"}}
							{{range .Parent }}
								<label class="ptButton"><input type="checkbox" name="parent" value="{{index .Name 0}}">{{index .Name 0}}</label></br>
							{{end}}
							{{range .Child }}
								<label class="ptButton"><input type="checkbox" name="child" value="{{index .Name 0}}">{{index .Name 0}}</label></br>
							{{end}}
						{{end}}
						</br>
						<input type="hidden" name="postProcessingHandler" value="selectFamilyMember">
						<input type="hidden" name="redirect" value="home">
						<input type="submit" class= "ptButton" value="OK">
					</form>
				</div>
			</div>
		</div>
		<div id="myProfileModal" class="modalDialog">
			<div style="text-align: center; width: 600px;">
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				{{with session "item" "family"}} {{$fam := .}}
					<h2>The {{ with index .Parent 0 }} {{ index .Name 1}} {{ end }}Family!</h2>
					{{range .Parent }}
						<a href="#personModal" class="ptButton showModalTrigger" onclick="onShowProfileModal('{{$fam.Login.User}}', {{index .Name 0}})">{{index .Name 0}} {{index .Name 1}}</a></br>
					{{ end }}
					{{range .Child }}
						<a href="#personModal" class="ptButton showModalTrigger" onclick="onShowProfileModal('{{$fam.Login.User}}', {{index .Name 0}})">{{index .Name 0}} {{index .Name 1}}, {{.Sex}}, Age {{.Age}}</a></br>
					{{ end }}
					<p>{{.Profile}}</p>
				{{end}}
			</div>
		</div>
		<div id="profileModal" class="modalDialog">
			<div style="text-align: center; width: 600px;">
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				
			</div>
		</div>
		<div id="personModal" class="modalDialog">
			<div style="text-align: center; width: 600px;">
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				<div id="personProfilePic" class="pictureFrame">
					<a title="Edit" class="modalButton edit">E</a>
					<img src="../img/profileBlank.jpg">
				</div>
			</div>
		</div>
		<div id="infoModal" class="modalDialog">
			<div>
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				<h2>What is {{.Title}}! all about</h2>
				<h3>The story</h3>
				<p>One day, I was pondering how shy my little boy is and how will I get him to open up to other children.  We didn't know very many families with small kids and thought about how easy it was to meet people on the internet.  I asked my wife about what she thought of a 'dating' site for babies.</p>
				<p>At first she scoffed, but in a moment the whole idea came to her as id did for me.  Of course if would be a tool for parents to set up playdates for their kids.  We could match up kids too young to make their own friends with similar developmental abilities and interest.</p>
			</div>
		</div>
		<div id="postModal" class="modalDialog">
			<div>
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				<h2>Whats on your mind</h2>
			</div>
		</div>
		<div id="adminModal" class="modalDialog">
			<div>
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				<h2>Administer  {{.Title}}</h2>
				<p>Tell us about yourself</p>
				<p>Who do you know?</p>
			</div>
		</div>
		<div id="loungeModal" class="modalDialog">
			<div>
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				<h2>Welcoome to li'lPlayDates lounge!</h2>
				<p>Tell us about yourself</p>
				<p>Who do you know?</p>
			</div>
		</div>
		<div id="logOutModal" class="modalDialog">
			<div>
				<a href="#closeModal" title="Close" class="closeModal">X</a>
				<h2>Are you sure you want to exit?</h2>
				<div class="container">
					<form action="/home" method="post">
						<input type="submit" class= "ptButton" value="Yes">
						<a href="#close" class= "ptButton">No</a>
						<input type="hidden" name="postProcessingHandler" value="logout">
						<input type="hidden" name="redirect" value="home">
					</form>
				</div>
				<p>Sorry to see you leave.</p>
				<p>Love to watch you go.</p>
			</div>
		</div>
	</body>
</html>